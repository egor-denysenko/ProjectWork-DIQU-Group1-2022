MASTER--------------------
		|  |			|  |
		|  |			|  |
		|  |			|  |
	   SLAVE		   SLAVE
	  
MAX 485	  
	  
MODALITA' DI COMUNICAZIONE

POLLING


__
RE SEMPRE A MASSA

POTER AGGANCIARE LE SCHEDE UNA DOPO L'ALTRA


RCIF VA A UNO QUANDO RICEVO IL DATO

SE HO L'ENABLE ATTIVO FUNZIONA, ALTRIMENTI NO

RCIE, PEIE E GIE A UNO PER FARE QUALCOSA CON L'INTERRUPT QUANDO MI ARRIVA IL DATO


UNA VOLTA FATTO TUTTO QUELLO CHE DEVO FARE, ABBASSO LE IF


DEFINIRE UN INTERVALLO TRA L'INVIO / RICEZIONE DI DATI



initSerial(unsigned long int baudRate){
	trisc &= ~0x40;
	trisc |= 0x80;
	
	TXSTA = 0x20;
	
	RCSTA = 0x90;
	
	INTCON |= 0x80;
	INTCON |= 0x40;
	PIE1 |= 0x20; abilito rcie
	
	recieved = 0;
	
	SPBRG = (char) (_XTAL_FREQ/(long) (64UL*baudRate)) - 1;
}

void sendSerial(char data){
	while(!(PIR1 & 0x10));
	PIR1 &= ~0x10;
	TXREG = data;
}

sendString(char str){
	int i = 0;
	while(str[i] != '\0')
	{
		sendSerial(str[i++]);
	}
}

interrupt{
	if(RCIF)
	{
		data = RCREG;
		recived = 1;
		RCIF = 0;
	}
}